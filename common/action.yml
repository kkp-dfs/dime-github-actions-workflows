name: Dime common action
description: Common action of Dime workflow

inputs:
  gh_access_token:
    description: GitHub access token
    required: false
    default: ${{ secrets.GH_ACCESS_TOKEN }}

runs:
  using: composite
  steps:
    - name: Create .netrc file
      shell: bash
      run: |
        cat <<EOF > $HOME/.netrc
        machine github.com
          login ${{ inputs.gh_access_token }}
          password x-oauth-basic
        EOF
        chmod 600 ~/.netrc
